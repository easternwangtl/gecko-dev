<!DOCTYPE html>
<html>

<head>
    <title>Simple App</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
    <meta charset="utf-8">
    <script>
        var clicks = 0;

        function handler(event) {
            // console.log(`Box event: ${event.type}`);
            window.events.textContent += `${event.type}\n`;
            if (event.type == "click") {
                clicks += 1;
                window.click_count.textContent = `${clicks} click${clicks > 1 ? "s" : ""}`;
            }
        }

        function add_box_event(event_name) {
            window.box.addEventListener(event_name, handler);
        }

        document.addEventListener("DOMContentLoaded", () => {
            window.ua.textContent = navigator.userAgent;

            add_box_event("touchstart");
            add_box_event("touchend");
            add_box_event("pointerdown");
            add_box_event("pointerup");
            add_box_event("mousedown");
            add_box_event("mouseup");
            add_box_event("click");
            add_box_event("contextmenu");
        });

        // From https://developer.mozilla.org/en-US/docs/Web/API/notification
        function show_notification() {
            console.log(`About to show a notification. Permission status: ${Notification.permission}`)

            // Let's check whether notification permissions have already been granted
            if (Notification.permission === "granted") {
                // If it's okay let's create a notification
                var notification = new Notification("Hi there!");
            }

            // Otherwise, we need to ask the user for permission
            else if (Notification.permission !== "denied") {
                console.log(`Requesting permission...`);
                Notification.requestPermission().then(function (permission) {
                    console.log(`Permission is now ${permission}`);
                    // If the user accepts, let's create a notification
                    if (permission === "granted") {
                        var notification = new Notification("Hi there!");
                    }
                });
            }

            // At last, if the user has denied notifications, and you 
            // want to be respectful there is no need to bother them any more.
        }
    </script>

    <style>
        #box {
            background-color: slateblue;
            width: 300px;
            height: 300px;
        }
    </style>
</head>

<body>
    <h1>App</h1>
    <h3 id="ua"></h3>
    <h2><a href="http://localhost:8081/system/akirodic.com/p/jellyfish/">WebGL demo</a></h2>
    <h2><button onclick="show_notification()">Notification</button></h2>
    <h2>Input: <input type="text"></h2>
    <div id="box"></div>
    <div id="click_count"></div>
    <pre id="events"></pre>
</body>

</html>